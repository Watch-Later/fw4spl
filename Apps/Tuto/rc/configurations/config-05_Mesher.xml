<plugin id="MesherConfiguration">
  <extension id="MesherConfig" implements="::fwData::Composite">
  <object id="MesherConfig" type="::fwData::Composite">
  
<!--  Creation de la fenetre principale -->

        <service type="::gui::aspect::IAspect" implementation="::gui::aspect::DefaultAspect" autoComChannel="no" >
            <name>Mesher</name>
            <icon>Bundles/Tuto_0-1/tuto.ico</icon>
            <minSize width="720" height="600"/>
            <views>
                <view guiContainerId="900"/>
                <view guiContainerId="901" minWidth="500" minHeight="100"/>
            </views>
            <menus>
                <menu uid="menuFile"/>
                <menu uid="menuMesher"/>
            </menus>
        </service>


<!-- Creation du menu. -->
    <service name="File" uid="menuFile" type="::gui::aspect::IMenu" implementation="::gui::aspect::DefaultMenu" autoComChannel="no" >
      <action uid="actionOpenImageFile"/>
      <action uid="actionSaveImageFile"/>
      <separator/>
      <action uid="actionOpenMeshFile"/>
      <action uid="actionSaveMeshFile"/>
      <separator/> 
      <action uid="actionQuit"/>
    </service>         

    <service name="Mesher" uid="menuMesher" type="::gui::aspect::IMenu" implementation="::gui::aspect::DefaultMenu" autoComChannel="no" >
      <action uid="actionCreateVTKMesh"/>
    </service> 
    
    <service uid="actionQuit" specialAction="QUIT"  name="Quit" type="::gui::action::IAction" implementation="::gui::action::QuitAction" shortcut="Ctrl+Q" autoComChannel="no" />

<!-- Creation des services pour le menu. -->
<!-- Action relatif au image -->

    <service uid="actionOpenImageFile" type="::gui::action::IAction" implementation="::gui::action::StarterActionService" name="Open image file" autoComChannel="no" >
      <start uid="readerPathImageFile"/>
    </service>
    
    <service uid="actionSaveImageFile" type="::gui::action::IAction" implementation="::gui::action::StarterActionService" name="Save image file" autoComChannel="no" >
      <start uid="writerImageFile"/>
    </service> 
    
    <service uid="actionOpenMeshFile" type="::gui::action::IAction" implementation="::gui::action::StarterActionService" name="Open mesh file" autoComChannel="no" >
      <start uid="readerPathMeshFile"/>
    </service>
    
    <service uid="actionSaveMeshFile" type="::gui::action::IAction" implementation="::gui::action::StarterActionService" name="Save mesh file" autoComChannel="no" >
      <start uid="writerMeshFile"/>
    </service>       
    
	<service uid="actionCreateVTKMesh" type="::gui::action::IAction" implementation="::opVTKMesh::action::VTKMeshCreation" name="Compute Mesh (VTK)" autoComChannel="no" >
    	<image uid="myImage"/>
    	<mesh uid="myMesh"/>
    </service>
                          

<!-- creation de la vue image. -->
   <object id="myImage" uid="myImage" type="::fwData::Image">
             
      <service implementation="::vtkSimpleNegato::RendererService" type="::fwRender::IRender" uid="RenderingImage" autoComChannel="yes" >
        <win guiContainerId="900"/>
      </service>
      
      
      <service implementation="::uiIO::editor::IOSelectorService" type="::gui::editor::IEditor" uid="readerPathImageFile" autoComChannel="no" >
        <win guiContainerId="900"/>
        <type mode="reader"/>
      </service>
      
      <service implementation="::uiIO::editor::IOSelectorService" type="::gui::editor::IEditor" uid="writerImageFile" autoComChannel="no" >
        <win guiContainerId="900"/>
        <type mode="writer"/>
      </service>
          
    </object>       
    
<!-- Creation de la vue Mesh. -->
     <object id="myMesh" uid="myMesh" type="::fwData::TriangularMesh">
                 
       <service implementation="::vtkSimpleMesh::RendererService" type="::fwRender::IRender" uid="RenderingMesh" autoComChannel="yes" >
            <masterSlaveRelation>master</masterSlaveRelation>
            <win guiContainerId="901"/>
        </service>
                 
      <service implementation="::uiIO::editor::IOSelectorService" type="::gui::editor::IEditor" uid="readerPathMeshFile" autoComChannel="no" >
        <win guiContainerId="901"/>
        <type mode="reader"/>
      </service>
      
      <service implementation="::uiIO::editor::IOSelectorService" type="::gui::editor::IEditor" uid="writerMeshFile" autoComChannel="no" >
        <win guiContainerId="901"/>
        <type mode="writer"/>
      </service>
                 
    </object> 
    
    
    <start type="::gui::aspect::IAspect" />
    <start uid="RenderingImage" />
    <start uid="RenderingMesh" />
    
    <stop uid="RenderingImage" />
    <stop uid="RenderingMesh" />
    <stop type="::gui::aspect::IAspect" />
  </object>
  </extension>
</plugin>    
